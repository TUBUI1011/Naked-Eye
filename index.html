<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Julian Date And Batch Code Display</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="dashboard-header">
        <h1 class="text-center mb-4">Julian Date And Batch Code Display</h1>
        <div class="info-cards">
          <div class="info-card">
            <h5 class="card-title">Current Julian Date</h5>
            <p id="julianDaily" class="font-weight-bold mb-0"></p>
          </div>
          <div class="info-card">
            <h5 class="card-title">Current Date & Time</h5>
            <p id="currentDateTime" class="font-weight-bold mb-0"></p>
          </div>
          <div class="info-card">
            <h5 class="card-title">Current Batch Code (Example)</h5>
            <p
              id="currentBatchCode"
              class="font-weight-bold mb-0"
              style="
                font-family: monospace;
                font-size: 1.2rem;
                color: var(--primary-color);
              "
            ></p>
          </div>
        </div>
      </div>

      <div class="table-container">
        <div id="expiry-info">
          <h5 class="text-primary p-3 mb-0">Shelf Life Expiration Dates</h5>
          <div class="table-responsive">
            <table class="table table-bordered mb-0">
              <thead>
                <tr>
                  <th>Shelf Life</th>
                  <th>Expiration Date</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>9 months</td>
                  <td id="expiry-9"></td>
                </tr>
                <tr>
                  <td>10 months</td>
                  <td id="expiry-10"></td>
                </tr>
                <tr>
                  <td>12 months</td>
                  <td id="expiry-12"></td>
                </tr>
                <tr>
                  <td>15 months</td>
                  <td id="expiry-15"></td>
                </tr>
                <tr>
                  <td>18 months</td>
                  <td id="expiry-18"></td>
                </tr>
                <tr>
                  <td>24 months</td>
                  <td id="expiry-24"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ================== KHU VỰC TÍNH TOÁN MỚI ================== -->
      <div class="calculator-container">
        <h4 class="text-center mb-4">Production Date Calculator</h4>
        <div class="row">
          <!-- Tính từ Batch Code -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="fas fa-barcode"></i> From Batch Code
                </h5>
                <div class="form-group">
                  <label for="batchInput">Enter Batch Code:</label>
                  <input
                    type="text"
                    class="form-control"
                    id="batchInput"
                    placeholder="e.g., 60022131X"
                  />
                </div>
                <button id="calcFromBatchBtn" class="btn btn-primary">
                  Calculate
                </button>
              </div>
            </div>
          </div>
          <!-- Tính từ Hạn sử dụng -->
          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="fas fa-calendar-times"></i> From Expiration Date
                </h5>
                <div class="form-group">
                  <label for="expiryInput">Enter Expiration Date:</label>
                  <input
                    type="text"
                    class="form-control"
                    id="expiryInput"
                    placeholder="DD.MM.YYYY"
                  />
                </div>
                <div class="form-group">
                  <label for="shelfLifeSelect">Select Shelf Life:</label>
                  <select class="form-control" id="shelfLifeSelect">
                    <option value="9">9 months</option>
                    <option value="10">10 months</option>
                    <option value="12">12 months</option>
                    <option value="15">15 months</option>
                    <option value="18">18 months</option>
                    <option value="24">24 months</option>
                  </select>
                </div>
                <button id="calcFromExpiryBtn" class="btn btn-primary">
                  Calculate
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- Khu vực hiển thị kết quả -->
        <div
          id="calcResult"
          class="alert alert-info mt-4"
          role="alert"
          style="display: none"
        ></div>
      </div>
      <!-- ============================================================= -->

      <!-- Bảng cho Packing Line -->
      <div class="table-container mt-5">
        <h3 class="text-center">Packing Line Information</h3>
        <table class="table table-bordered table-striped">
          <thead class="thead-dark">
            <tr>
              <th>Production Line</th>
              <th>Batch Code</th>
              <th>Expiration Date (Bag)</th>
              <th>Expiration Date (Carton)</th>
            </tr>
          </thead>
          <tbody>
            <!-- 2IN1 -->
            <tr>
              <td>SANKO 14 (12m)</td>
              <td><span id="pack-batchCode"></span></td>
              <td><span id="pack-expirationDateBag"></span></td>
              <td><span id="pack-expirationDateCarton"></span></td>
            </tr>
            <tr>
              <td>SANKO 12 (9m)</td>
              <td><span id="pack-batchCode2"></span></td>
              <td><span id="pack-expirationDateBag2"></span></td>
              <td><span id="pack-expirationDateCarton2"></span></td>
            </tr>
            <tr>
              <td>SANKO 711 (9m)</td>
              <td><span id="pack-batchCode711"></span></td>
              <td><span id="pack-expirationDateBag711"></span></td>
              <td><span id="pack-expirationDateCarton711"></span></td>
            </tr>
            <tr>
              <td>TOPACK 34 (9m)</td>
              <td><span id="pack-batchCode34"></span></td>
              <td><span id="pack-expirationDateBag34"></span></td>
              <td><span id="pack-expirationDateCarton34"></span></td>
            </tr>
            <!-- 3IN1 -->
            <tr>
              <td>SANKO 48 (15m)</td>
              <td><span id="pack-batchCode48"></span></td>
              <td><span id="pack-expirationDateBag48"></span></td>
              <td><span id="pack-expirationDateCarton48"></span></td>
            </tr>
            <tr>
              <td>SANKO 26 (15m)</td>
              <td><span id="pack-batchCode26"></span></td>
              <td><span id="pack-expirationDateBag26"></span></td>
              <td><span id="pack-expirationDateCarton26"></span></td>
            </tr>
            <tr>
              <td>MESPACK 12 (15m)</td>
              <td><span id="pack-batchCodeMes12"></span></td>
              <td><span id="pack-expirationDateBagMes12"></span></td>
              <td><span id="pack-expirationDateCartonMes12"></span></td>
            </tr>
            <tr>
              <td>MESPACK 3 (15m)</td>
              <td><span id="pack-batchCodeMes3"></span></td>
              <td><span id="pack-expirationDateBagMes3"></span></td>
              <td><span id="pack-expirationDateCartonMes3"></span></td>
            </tr>
            <!-- PSC -->
            <tr>
              <td>MESPACK (24m)</td>
              <td><span id="pack-batchCodeGold24"></span></td>
              <td><span id="pack-expirationDateBagGold24"></span></td>
              <td><span id="pack-expirationDateCartonGold24"></span></td>
            </tr>
            <tr>
              <td>MESPACK (18m)</td>
              <td><span id="pack-batchCodeMes18"></span></td>
              <td><span id="pack-expirationDateBagMes18"></span></td>
              <td><span id="pack-expirationDateCartonMes18"></span></td>
            </tr>
            <tr>
              <td>PSCUNI (18m)</td>
              <td><span id="pack-batchCodeUni18"></span></td>
              <td><span id="pack-expirationDateBagUni18"></span></td>
              <td><span id="pack-expirationDateCartonUni18"></span></td>
            </tr>
            <tr>
              <td>PSCTAWO (18m)</td>
              <td><span id="pack-batchCodeTawo18"></span></td>
              <td><span id="pack-expirationDateBagTawo18"></span></td>
              <td><span id="pack-expirationDateCartonTawo18"></span></td>
            </tr>
            <tr>
              <td>PSCWOLF (18m)</td>
              <td><span id="pack-batchCodeWolf18"></span></td>
              <td><span id="pack-expirationDateBagWolf18"></span></td>
              <td><span id="pack-expirationDateCartonWolf18"></span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Bảng cho Filling Machine -->
      <div class="table-container mt-5">
        <h3 class="text-center">Filling Machine Information</h3>
        <table class="table table-bordered table-striped">
          <thead class="thead-dark">
            <tr>
              <th>Production Line</th>
              <th>Batch Code</th>
              <th>Expiration Date (Stick)</th>
            </tr>
          </thead>
          <tbody>
            <!-- 2IN1 -->
            <tr>
              <td>SANKO 14 (12m)</td>
              <td><span id="fill-batchCodeS14"></span></td>
              <td><span id="fill-expirationDateS14"></span></td>
            </tr>
            <tr>
              <td>SANKO 12 (9m)</td>
              <td><span id="fill-batchCodeS12"></span></td>
              <td><span id="fill-expirationDateS12"></span></td>
            </tr>
            <tr>
              <td>SANKO 7 (of 711) (9m)</td>
              <td><span id="fill-batchCodeS7"></span></td>
              <td><span id="fill-expirationDateS7"></span></td>
            </tr>
            <tr>
              <td>SANKO 11 (of 711) (9m)</td>
              <td><span id="fill-batchCodeS11"></span></td>
              <td><span id="fill-expirationDateS11"></span></td>
            </tr>
            <tr>
              <td>TOPACK 3 (of 34) (9m)</td>
              <td><span id="fill-batchCodeT3"></span></td>
              <td><span id="fill-expirationDateT3"></span></td>
            </tr>
            <tr>
              <td>TOPACK 4 (of 34) (9m)</td>
              <td><span id="fill-batchCodeT4"></span></td>
              <td><span id="fill-expirationDateT4"></span></td>
            </tr>
            <!-- 3IN1 -->
            <tr>
              <td>SANKO 4 (of 48) (15m)</td>
              <td><span id="fill-batchCodeS4"></span></td>
              <td><span id="fill-expirationDateS4"></span></td>
            </tr>
            <tr>
              <td>SANKO 8 (of 48) (15m)</td>
              <td><span id="fill-batchCodeS8"></span></td>
              <td><span id="fill-expirationDateS8"></span></td>
            </tr>
            <tr>
              <td>SANKO 2 (of 26) (15m)</td>
              <td><span id="fill-batchCodeS2"></span></td>
              <td><span id="fill-expirationDateS2"></span></td>
            </tr>
            <tr>
              <td>SANKO 6 (of 26) (15m)</td>
              <td><span id="fill-batchCodeS6"></span></td>
              <td><span id="fill-expirationDateS6"></span></td>
            </tr>
            <tr>
              <td>MESPACK 1 (of 12) (15m)</td>
              <td><span id="fill-batchCodeM1"></span></td>
              <td><span id="fill-expirationDateM1"></span></td>
            </tr>
            <tr>
              <td>MESPACK 2 (of 12) (15m)</td>
              <td><span id="fill-batchCodeM2"></span></td>
              <td><span id="fill-expirationDateM2"></span></td>
            </tr>
            <tr>
              <td>MESPACK 3 (of 3) (15m)</td>
              <td><span id="fill-batchCodeM3"></span></td>
              <td><span id="fill-expirationDateM3"></span></td>
            </tr>
            <!-- PSC -->
            <tr>
              <td>PSCMES (24m)</td>
              <td><span id="fill-batchCodePscmes24"></span></td>
              <td><span id="fill-expirationDatePscmes24"></span></td>
            </tr>
            <tr>
              <td>PSCMES (18m)</td>
              <td><span id="fill-batchCodePscmes18"></span></td>
              <td><span id="fill-expirationDatePscmes18"></span></td>
            </tr>
            <tr>
              <td>PSCUNI (18m)</td>
              <td><span id="fill-batchCodePscuni"></span></td>
              <td><span id="fill-expirationDatePscuni"></span></td>
            </tr>
            <tr>
              <td>TAM (of TAWO) (18m)</td>
              <td><span id="fill-batchCodeTam"></span></td>
              <td><span id="fill-expirationDateTam"></span></td>
            </tr>
            <tr>
              <td>WOLF 1 (of TAWO) (18m)</td>
              <td><span id="fill-batchCodeWolf1"></span></td>
              <td><span id="fill-expirationDateWolf1"></span></td>
            </tr>
            <tr>
              <td>WOLF 2 (of PSCWOLF) (18m)</td>
              <td><span id="fill-batchCodeWolf2"></span></td>
              <td><span id="fill-expirationDateWolf2"></span></td>
            </tr>
            <tr>
              <td>WOLF 3 (of PSCWOLF) (18m)</td>
              <td><span id="fill-batchCodeWolf3"></span></td>
              <td><span id="fill-expirationDateWolf3"></span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ================== KHU VỰC VALIDATE BẰNG CAMERA (BỊ THIẾU) ================== -->
      <div class="validator-container mt-5">
        <h2 class="text-center mb-4">Code Validator via Camera</h2>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <!-- Cột 1: Area -->
              <div class="col-md-3">
                <div class="form-group">
                  <label for="areaSelect">1. Select Area:</label>
                  <select class="form-control" id="areaSelect"></select>
                </div>
              </div>
              <!-- Cột 2: Group -->
              <div class="col-md-3">
                <div class="form-group">
                  <label for="groupSelect">2. Select Group:</label>
                  <select
                    class="form-control"
                    id="groupSelect"
                    disabled
                  ></select>
                </div>
              </div>
              <!-- Cột 3: Line -->
              <div class="col-md-3">
                <div class="form-group">
                  <label for="productSelect">3. Select Line:</label>
                  <select
                    class="form-control"
                    id="productSelect"
                    disabled
                  ></select>
                </div>
              </div>
              <!-- Cột 4: Code Type -->
              <div class="col-md-3">
                <div class="form-group">
                  <label for="codeTypeSelect">4. Select Code Type:</label>
                  <select class="form-control" id="codeTypeSelect">
                    <option value="stick">Stick</option>
                    <option value="bag">Bag</option>
                    <option value="carton">Carton</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Nút điều khiển -->
            <div class="mt-3">
              <button id="startCameraBtn" class="btn btn-primary" disabled>
                <i class="fas fa-camera"></i> Start Camera
              </button>
              <label
                for="uploadInput"
                id="uploadBtn"
                class="btn btn-info"
                style="cursor: pointer"
              >
                <i class="fas fa-upload"></i> Upload Image
              </label>
              <input
                type="file"
                id="uploadInput"
                accept="image/*"
                style="display: none"
              />
              <button
                id="captureBtn"
                class="btn btn-success"
                style="display: none"
              >
                <i class="fas fa-crosshairs"></i> Capture & Validate
              </button>
              <button
                id="stopCameraBtn"
                class="btn btn-danger"
                style="display: none"
              >
                <i class="fas fa-stop-circle"></i> Stop Camera
              </button>
            </div>

            <!-- Giao diện Camera -->
            <div
              id="cameraContainer"
              class="mt-3"
              style="display: none; position: relative"
            >
              <video
                id="videoElement"
                autoplay
                playsinline
                style="width: 100%; border-radius: 8px"
              ></video>
              <div id="viewfinder"></div>
            </div>

            <!-- Khu vực hiển thị kết quả -->
            <div id="resultContainer" class="mt-4" style="display: none">
              <div class="row">
                <!-- Cột ảnh chụp -->
                <div class="col-md-5 text-center">
                  <h5><i class="fas fa-image"></i> Captured Image</h5>
                  <img
                    id="capturedImageDisplay"
                    class="img-fluid rounded border"
                    alt="Captured Code"
                  />
                </div>
                <!-- Cột kết quả phân tích -->
                <div class="col-md-7">
                  <h5><i class="fas fa-tasks"></i> Analysis Result</h5>
                  <div
                    id="statusBadge"
                    class="alert alert-warning text-center font-weight-bold"
                  ></div>
                  <div id="spinner" class="text-center" style="display: none">
                    <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                  </div>
                  <div class="form-group mt-3">
                    <label for="expectedTextInput"
                      >Expected Code (Standard):</label
                    >
                    <input
                      type="text"
                      id="expectedTextInput"
                      class="form-control"
                      readonly
                    />
                  </div>
                  <div class="form-group">
                    <label for="detectedTextInput"
                      >AI Detected Code (Actual):</label
                    >
                    <input
                      type="text"
                      id="detectedTextInput"
                      class="form-control"
                      readonly
                    />
                  </div>
                  <div
                    id="errorMessage"
                    class="text-danger small mt-2"
                    style="display: none"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- =========================================================================== -->
    </div>

    <!-- Load scripts at the end for better performance -->
    <script
      src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"
      defer
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      defer
    ></script>
    <!-- XÓA CÁC DÒNG BÊN DƯỚI -->
    <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jimp/0.16.1/jimp-browser.min.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/buffer@6.0.3/index.min.js"
      defer
    ></script> -->
    <!-- KẾT THÚC PHẦN XÓA -->
    <script src="script.js"></script>
  </body>
</html>
